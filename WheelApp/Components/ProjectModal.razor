@using System.ComponentModel.DataAnnotations

@if (IsVisible)
{
    <div class="modal-overlay" @onclick="Cancel">
        <div class="modal-content" @onclick:stopPropagation="true">

            <div class="modal-header">
                <h3>Create New Project</h3>
                <button class="close-button" @onclick="Cancel">&times;</button>
            </div>

            <div class="modal-body">
                <EditForm Model="@_model" OnValidSubmit="HandleValidSubmit">
                    <DataAnnotationsValidator />

                    <div class="form-group">
                        <label for="projectName">Project Name</label>
                        <InputText id="projectName"
                                   class="form-control"
                                   style="@GetInputStyle()"
                                   @bind-Value="_model.ProjectName"
                                   @oninput="OnNameInput"
                                   placeholder="Enter project name" />
                        <ValidationMessage For="@(() => _model.ProjectName)" />
                        @if (!string.IsNullOrEmpty(_validationError))
                        {
                            <div class="validation-message">@_validationError</div>
                        }
                    </div>

                    <div class="form-group">
                        <label for="description">Description</label>
                        <InputTextArea id="description" class="form-control" @bind-Value="_model.Description" placeholder="Optional details" />
                    </div>

                    <div class="form-group">
                        <label for="projectType">Project Type</label>
                        <InputSelect id="projectType" class="form-control" @bind-Value="_model.ProjectType">
                            <option value="">Select project type</option>
                            @foreach (var type in _projectTypes)
                            {
                                <option value="@type.Key">@type.Value</option>
                            }
                        </InputSelect>
                        <ValidationMessage For="@(() => _model.ProjectType)" />
                    </div>

                    <div class="modal-footer">
                        <SnowButton ButtonVariant="@SnowButton.Variant.Light" ButtonSize="@SnowButton.Size.Medium" OnClick="Cancel">Cancel</SnowButton>
                        <SnowButton type="submit" ButtonVariant="@SnowButton.Variant.Filled" ButtonSize="@SnowButton.Size.Medium" TrailingIconUrl="svgs/arrow-right.svg">Next</SnowButton>
                    </div>
                </EditForm>
            </div>
        </div>
    </div>
}
