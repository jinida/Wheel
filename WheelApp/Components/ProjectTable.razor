@using WheelApp.Application.DTOs

<div class="data-grid dataset-grid">
    <div class="grid-header cell-checkbox"><input type="checkbox" checked="@IsAllRowsSelected" @onchange="HandleToggleAll" /></div>
    <div class="grid-header">Project Name</div>
    <div class="grid-header">Description</div>
    <div class="grid-header">Creator</div>
    <div class="grid-header">Creation Date</div>
    <div class="grid-header">Change Date</div>
    <div class="grid-header">Project Type</div>
    <div class="grid-header"></div>

    @foreach (var project in PaginatedProjects)
    {
        <div class="grid-row @(IsRowSelected(project.Id) ? "selected" : "") @(IsRowHighlighted(project.Id) ? "highlighted" : "")"
             @key="project.Id"
             @ondblclick="() => OnRowDoubleClick.InvokeAsync(project.Id)"
             style="cursor: pointer;">
            <div class="grid-cell cell-checkbox" data-label="Select">
                <input type="checkbox"
                       checked="@IsRowSelected(project.Id)"
                       @onchange="() => OnRowSelectionToggle.InvokeAsync(project.Id)"
                       @onclick:stopPropagation="true" />
            </div>
            <div class="grid-cell" data-label="Project Name">@project.Name</div>
            <div class="grid-cell" data-label="Description">@project.Description</div>
            <div class="grid-cell" data-label="Creator">@project.CreatedBy</div>
            <div class="grid-cell" data-label="Creation Date">@project.CreatedAt.ToString("yyyy-MM-dd")</div>
            <div class="grid-cell" data-label="Change Date">@((project.ModifiedAt ?? project.CreatedAt).ToString("yyyy-MM-dd"))</div>
            <div class="grid-cell" data-label="Project Type">@project.TypeName</div>
            <div class="grid-cell cell-action" data-label="Action">
                <button class="icon-button"
                        title="Edit project"
                        @onclick="() => OnEditClick.InvokeAsync(project.Id)"
                        @onclick:stopPropagation="true">
                    <img src="svgs/dotsthreeoutlinevertical.svg" />
                </button>
            </div>
        </div>
    }
</div>

<Pagination CurrentPage="@PaginationState.CurrentPage"
           TotalPages="@PaginationState.TotalPages"
           ShowPagination="true"
           OnPageChange="@ChangePage" />
