@using System.ComponentModel.DataAnnotations

@if (IsVisible)
{
    <div class="modal-overlay" @onclick="Cancel">
        <div class="modal-content" @onclick:stopPropagation="true">

            <div class="modal-header">
                <h3>Create New Class</h3>
                <button class="close-button" @onclick="Cancel">&times;</button>
            </div>

            <div class="modal-body">
                <EditForm Model="@_model" OnValidSubmit="HandleValidSubmit">
                    <DataAnnotationsValidator />

                    <div class="form-group">
                        <label for="className">Class Name</label>
                        <InputText id="className"
                                   class="@GetNameInputClass()"
                                   @bind-Value="_model.ClassName"
                                   @oninput="OnNameInput"
                                   placeholder="Enter class name" />
                        <ValidationMessage For="@(() => _model.ClassName)" />
                        @if (!string.IsNullOrEmpty(_nameError))
                        {
                            <div class="invalid-feedback d-block">@_nameError</div>
                        }
                    </div>

                    <div class="form-group">
                        <label for="classColor">Class Color</label>
                        <div class="color-input-wrapper">
                            <input type="color"
                                   id="classColor"
                                   class="color-picker"
                                   @bind="_model.ClassColor"
                                   @bind:event="oninput"
                                   @onchange="OnColorInput"/>
                            <InputText class="@GetColorInputClass()"
                                       @bind-Value="_model.ClassColor"
                                       @oninput="OnColorInput"
                                       placeholder="#808080" />
                        </div>
                        <ValidationMessage For="@(() => _model.ClassColor)" />
                        @if (!string.IsNullOrEmpty(_colorError))
                        {
                            <div class="invalid-feedback d-block">@_colorError</div>
                        }
                    </div>

                    <div class="modal-footer">
                        <SnowButton ButtonVariant="@SnowButton.Variant.Light"
                                    ButtonSize="@SnowButton.Size.Medium"
                                    OnClick="Cancel">Cancel</SnowButton>
                        <SnowButton type="submit"
                                    ButtonVariant="@SnowButton.Variant.Filled"
                                    ButtonSize="@SnowButton.Size.Medium"
                                    TrailingIconUrl="svgs/arrow-right.svg">Create</SnowButton>
                    </div>
                </EditForm>
            </div>
        </div>
    </div>
}
